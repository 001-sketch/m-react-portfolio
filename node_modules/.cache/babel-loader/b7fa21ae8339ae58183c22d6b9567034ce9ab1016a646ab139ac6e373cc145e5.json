{"ast":null,"code":"import React,{useEffect,useRef,useContext}from\"react\";import classNames from\"classnames\";import{Vector2,sRGBEncoding,WebGLRenderer,PerspectiveCamera,Scene,DirectionalLight,AmbientLight,UniformsUtils,UniformsLib,MeshPhongMaterial,SphereBufferGeometry,Mesh}from\"three\";import{spring,value}from\"popmotion\";import innerHeight from\"ios-inner-height\";import vertShader from\"./sphereVertShader\";import fragShader from\"./sphereFragShader\";import{Transition}from\"react-transition-group\";import{usePrefersReducedMotion}from\"../../hooks/usePrefersReducedMotion\";import{useInViewport}from\"../../hooks/useInViewport\";import{reflow}from\"../../utils/transition\";import{media,rgbToThreeColor}from\"../../utils/style\";import{cleanScene,removeLights,cleanRenderer}from\"../../utils/three\";import\"./DisplacementSphere.css\";import{ThemeContext}from\"../theme/ThemeProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";const DisplacementSphere=props=>{const{theme}=useContext(ThemeContext);const rgbBackground=theme===\"light\"?\"250 250 250\":\"17 17 17\";const width=useRef(window.innerWidth);const height=useRef(window.innerHeight);const start=useRef(Date.now());const canvasRef=useRef();const mouse=useRef();const renderer=useRef();const camera=useRef();const scene=useRef();const lights=useRef();const uniforms=useRef();const material=useRef();const geometry=useRef();const sphere=useRef();const tweenRef=useRef();const sphereSpring=useRef();const prefersReducedMotion=Boolean(usePrefersReducedMotion()&&false);//disabled until switching themes fixed\nconst isInViewport=useInViewport(canvasRef);useEffect(()=>{mouse.current=new Vector2(0.8,0.5);renderer.current=new WebGLRenderer({canvas:canvasRef.current,powerPreference:\"high-performance\"});renderer.current.setSize(width.current,height.current);renderer.current.setPixelRatio(1);renderer.current.outputEncoding=sRGBEncoding;camera.current=new PerspectiveCamera(55,width.current/height.current,0.1,200);camera.current.position.z=52;scene.current=new Scene();material.current=new MeshPhongMaterial();material.current.onBeforeCompile=shader=>{uniforms.current=UniformsUtils.merge([UniformsLib[\"ambient\"],UniformsLib[\"lights\"],shader.uniforms,{time:{type:\"f\",value:0}}]);shader.uniforms=uniforms.current;shader.vertexShader=vertShader;shader.fragmentShader=fragShader;shader.lights=true;};geometry.current=new SphereBufferGeometry(32,128,128);sphere.current=new Mesh(geometry.current,material.current);sphere.current.position.z=0;sphere.current.modifier=Math.random();scene.current.add(sphere.current);return()=>{cleanScene(scene.current);cleanRenderer(renderer.current);};},[]);useEffect(()=>{const dirLight=new DirectionalLight(rgbToThreeColor(\"250 250 250\"),0.6);const ambientLight=new AmbientLight(rgbToThreeColor(\"250 250 250\"),theme===\"light\"?0.8:0.1);dirLight.position.z=200;dirLight.position.x=100;dirLight.position.y=100;lights.current=[dirLight,ambientLight];scene.current.background=rgbToThreeColor(rgbBackground);lights.current.forEach(light=>scene.current.add(light));return()=>{removeLights(lights.current);};},[rgbBackground,theme]);useEffect(()=>{const handleResize=()=>{const canvasHeight=innerHeight();const windowWidth=window.innerWidth;const fullHeight=canvasHeight+canvasHeight*0.3;canvasRef.current.style.height=fullHeight;renderer.current.setSize(windowWidth,fullHeight);camera.current.aspect=windowWidth/fullHeight;camera.current.updateProjectionMatrix();// Render a single frame on resize when not animating\nif(prefersReducedMotion){renderer.current.render(scene.current,camera.current);}if(windowWidth<=media.mobile){sphere.current.position.x=14;sphere.current.position.y=10;}else if(windowWidth<=media.tablet){sphere.current.position.x=18;sphere.current.position.y=14;}else{sphere.current.position.x=22;sphere.current.position.y=16;}};window.addEventListener(\"resize\",handleResize);handleResize();return()=>{window.removeEventListener(\"resize\",handleResize);};},[prefersReducedMotion]);useEffect(()=>{const onMouseMove=event=>{const{rotation}=sphere.current;const position={x:event.clientX/window.innerWidth,y:event.clientY/window.innerHeight};if(!sphereSpring.current){sphereSpring.current=value(rotation.toArray(),values=>rotation.set(values[0],values[1],sphere.current.rotation.z));}tweenRef.current=spring({from:sphereSpring.current.get(),to:[position.y/2,position.x/2],stiffness:30,damping:20,velocity:sphereSpring.current.getVelocity(),mass:2,restSpeed:0.0001}).start(sphereSpring.current);};if(!prefersReducedMotion&&isInViewport){window.addEventListener(\"mousemove\",onMouseMove);}return()=>{window.removeEventListener(\"mousemove\",onMouseMove);if(tweenRef.current){tweenRef.current.stop();}};},[isInViewport,prefersReducedMotion]);useEffect(()=>{let animation;const animate=()=>{animation=requestAnimationFrame(animate);if(uniforms.current!==undefined){uniforms.current.time.value=0.00005*(Date.now()-start.current);}sphere.current.rotation.z+=0.001;renderer.current.render(scene.current,camera.current);};if(!prefersReducedMotion&&isInViewport){animate();}else{renderer.current.render(scene.current,camera.current);}return()=>{cancelAnimationFrame(animation);};},[isInViewport,prefersReducedMotion]);return/*#__PURE__*/_jsx(Transition,{appear:true,in:true,onEnter:reflow,timeout:3000,children:status=>/*#__PURE__*/_jsx(\"canvas\",{\"aria-hidden\":true,className:classNames(\"displacement-sphere\",`displacement-sphere--${status}`),ref:canvasRef,...props})});};export default DisplacementSphere;","map":{"version":3,"names":["React","useEffect","useRef","useContext","classNames","Vector2","sRGBEncoding","WebGLRenderer","PerspectiveCamera","Scene","DirectionalLight","AmbientLight","UniformsUtils","UniformsLib","MeshPhongMaterial","SphereBufferGeometry","Mesh","spring","value","innerHeight","vertShader","fragShader","Transition","usePrefersReducedMotion","useInViewport","reflow","media","rgbToThreeColor","cleanScene","removeLights","cleanRenderer","ThemeContext","jsx","_jsx","DisplacementSphere","props","theme","rgbBackground","width","window","innerWidth","height","start","Date","now","canvasRef","mouse","renderer","camera","scene","lights","uniforms","material","geometry","sphere","tweenRef","sphereSpring","prefersReducedMotion","Boolean","isInViewport","current","canvas","powerPreference","setSize","setPixelRatio","outputEncoding","position","z","onBeforeCompile","shader","merge","time","type","vertexShader","fragmentShader","modifier","Math","random","add","dirLight","ambientLight","x","y","background","forEach","light","handleResize","canvasHeight","windowWidth","fullHeight","style","aspect","updateProjectionMatrix","render","mobile","tablet","addEventListener","removeEventListener","onMouseMove","event","rotation","clientX","clientY","toArray","values","set","from","get","to","stiffness","damping","velocity","getVelocity","mass","restSpeed","stop","animation","animate","requestAnimationFrame","undefined","cancelAnimationFrame","appear","in","onEnter","timeout","children","status","className","ref"],"sources":["/home/mica/react-portfolio/src/components/background/DisplacementSphere.js"],"sourcesContent":["import React, { useEffect, useRef, useContext } from \"react\";\nimport classNames from \"classnames\";\nimport {\n    Vector2,\n    sRGBEncoding,\n    WebGLRenderer,\n    PerspectiveCamera,\n    Scene,\n    DirectionalLight,\n    AmbientLight,\n    UniformsUtils,\n    UniformsLib,\n    MeshPhongMaterial,\n    SphereBufferGeometry,\n    Mesh,\n} from \"three\";\nimport { spring, value } from \"popmotion\";\nimport innerHeight from \"ios-inner-height\";\nimport vertShader from \"./sphereVertShader\";\nimport fragShader from \"./sphereFragShader\";\nimport { Transition } from \"react-transition-group\";\nimport { usePrefersReducedMotion } from \"../../hooks/usePrefersReducedMotion\";\nimport { useInViewport } from \"../../hooks/useInViewport\";\nimport { reflow } from \"../../utils/transition\";\nimport { media, rgbToThreeColor } from \"../../utils/style\";\nimport { cleanScene, removeLights, cleanRenderer } from \"../../utils/three\";\nimport \"./DisplacementSphere.css\";\nimport { ThemeContext } from \"../theme/ThemeProvider\";\n\nconst DisplacementSphere = (props) => {\n    const { theme } = useContext(ThemeContext);\n    const rgbBackground = theme === \"light\" ? \"250 250 250\" : \"17 17 17\";\n    const width = useRef(window.innerWidth);\n    const height = useRef(window.innerHeight);\n    const start = useRef(Date.now());\n    const canvasRef = useRef();\n    const mouse = useRef();\n    const renderer = useRef();\n    const camera = useRef();\n    const scene = useRef();\n    const lights = useRef();\n    const uniforms = useRef();\n    const material = useRef();\n    const geometry = useRef();\n    const sphere = useRef();\n    const tweenRef = useRef();\n    const sphereSpring = useRef();\n    const prefersReducedMotion = Boolean(usePrefersReducedMotion() && false); //disabled until switching themes fixed\n    const isInViewport = useInViewport(canvasRef);\n\n    useEffect(() => {\n        mouse.current = new Vector2(0.8, 0.5);\n        renderer.current = new WebGLRenderer({\n            canvas: canvasRef.current,\n            powerPreference: \"high-performance\",\n        });\n        renderer.current.setSize(width.current, height.current);\n        renderer.current.setPixelRatio(1);\n        renderer.current.outputEncoding = sRGBEncoding;\n\n        camera.current = new PerspectiveCamera(\n            55,\n            width.current / height.current,\n            0.1,\n            200\n        );\n        camera.current.position.z = 52;\n\n        scene.current = new Scene();\n\n        material.current = new MeshPhongMaterial();\n        material.current.onBeforeCompile = (shader) => {\n            uniforms.current = UniformsUtils.merge([\n                UniformsLib[\"ambient\"],\n                UniformsLib[\"lights\"],\n                shader.uniforms,\n                { time: { type: \"f\", value: 0 } },\n            ]);\n\n            shader.uniforms = uniforms.current;\n            shader.vertexShader = vertShader;\n            shader.fragmentShader = fragShader;\n            shader.lights = true;\n        };\n\n        geometry.current = new SphereBufferGeometry(32, 128, 128);\n\n        sphere.current = new Mesh(geometry.current, material.current);\n        sphere.current.position.z = 0;\n        sphere.current.modifier = Math.random();\n        scene.current.add(sphere.current);\n\n        return () => {\n            cleanScene(scene.current);\n            cleanRenderer(renderer.current);\n        };\n    }, []);\n\n    useEffect(() => {\n        const dirLight = new DirectionalLight(\n            rgbToThreeColor(\"250 250 250\"),\n            0.6\n        );\n        const ambientLight = new AmbientLight(\n            rgbToThreeColor(\"250 250 250\"),\n            theme === \"light\" ? 0.8 : 0.1\n        );\n\n        dirLight.position.z = 200;\n        dirLight.position.x = 100;\n        dirLight.position.y = 100;\n\n        lights.current = [dirLight, ambientLight];\n        scene.current.background = rgbToThreeColor(rgbBackground);\n        lights.current.forEach((light) => scene.current.add(light));\n\n        return () => {\n            removeLights(lights.current);\n        };\n    }, [rgbBackground, theme]);\n\n    useEffect(() => {\n        const handleResize = () => {\n            const canvasHeight = innerHeight();\n            const windowWidth = window.innerWidth;\n            const fullHeight = canvasHeight + canvasHeight * 0.3;\n            canvasRef.current.style.height = fullHeight;\n            renderer.current.setSize(windowWidth, fullHeight);\n            camera.current.aspect = windowWidth / fullHeight;\n            camera.current.updateProjectionMatrix();\n\n            // Render a single frame on resize when not animating\n            if (prefersReducedMotion) {\n                renderer.current.render(scene.current, camera.current);\n            }\n\n            if (windowWidth <= media.mobile) {\n                sphere.current.position.x = 14;\n                sphere.current.position.y = 10;\n            } else if (windowWidth <= media.tablet) {\n                sphere.current.position.x = 18;\n                sphere.current.position.y = 14;\n            } else {\n                sphere.current.position.x = 22;\n                sphere.current.position.y = 16;\n            }\n        };\n\n        window.addEventListener(\"resize\", handleResize);\n        handleResize();\n\n        return () => {\n            window.removeEventListener(\"resize\", handleResize);\n        };\n    }, [prefersReducedMotion]);\n\n    useEffect(() => {\n        const onMouseMove = (event) => {\n            const { rotation } = sphere.current;\n\n            const position = {\n                x: event.clientX / window.innerWidth,\n                y: event.clientY / window.innerHeight,\n            };\n\n            if (!sphereSpring.current) {\n                sphereSpring.current = value(rotation.toArray(), (values) =>\n                    rotation.set(\n                        values[0],\n                        values[1],\n                        sphere.current.rotation.z\n                    )\n                );\n            }\n\n            tweenRef.current = spring({\n                from: sphereSpring.current.get(),\n                to: [position.y / 2, position.x / 2],\n                stiffness: 30,\n                damping: 20,\n                velocity: sphereSpring.current.getVelocity(),\n                mass: 2,\n                restSpeed: 0.0001,\n            }).start(sphereSpring.current);\n        };\n\n        if (!prefersReducedMotion && isInViewport) {\n            window.addEventListener(\"mousemove\", onMouseMove);\n        }\n\n        return () => {\n            window.removeEventListener(\"mousemove\", onMouseMove);\n\n            if (tweenRef.current) {\n                tweenRef.current.stop();\n            }\n        };\n    }, [isInViewport, prefersReducedMotion]);\n\n    useEffect(() => {\n        let animation;\n\n        const animate = () => {\n            animation = requestAnimationFrame(animate);\n\n            if (uniforms.current !== undefined) {\n                uniforms.current.time.value =\n                    0.00005 * (Date.now() - start.current);\n            }\n\n            sphere.current.rotation.z += 0.001;\n            renderer.current.render(scene.current, camera.current);\n        };\n\n        if (!prefersReducedMotion && isInViewport) {\n            animate();\n        } else {\n            renderer.current.render(scene.current, camera.current);\n        }\n\n        return () => {\n            cancelAnimationFrame(animation);\n        };\n    }, [isInViewport, prefersReducedMotion]);\n\n    return (\n        <Transition appear in onEnter={reflow} timeout={3000}>\n            {(status) => (\n                <canvas\n                    aria-hidden\n                    className={classNames(\n                        \"displacement-sphere\",\n                        `displacement-sphere--${status}`\n                    )}\n                    ref={canvasRef}\n                    {...props}\n                />\n            )}\n        </Transition>\n    );\n};\n\nexport default DisplacementSphere;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}